SET SERVEROUTPUT ON;CREATE TABLE TRABAJADOR_INI(ID INTEGER PRIMARY KEY, NOMBRE VARCHAR2(40), SUELDO_BASE FLOAT);CREATE TABLE RESPALDO(ID INTEGER , NOMBRE VARCHAR2(40), SUELDO_BASE FLOAT);INSERT INTO TRABAJADOR_INI VALUES(1,'juan', 10000);INSERT INTO TRABAJADOR_INI VALUES(2,'ana', 15000);INSERT INTO TRABAJADOR_INI VALUES(3,'maria', 20000);CREATE OR REPLACE PROCEDURE CONTAR(NUMERO OUT INTEGER)ASBEGINSELECT COUNT(*) INTO NUMERO FROM TRABAJADOR_INI;DBMS_OUTPUT.PUT_LINE('ENCONTRADOS  '||NUMERO);END;/DECLARE VALOR INTEGER;BEGINCONTAR(VALOR);END;/-- EL QUE COPIACREATE OR REPLACE PROCEDURE COPIAR ASCURSOR CUR_TRABAJADOR_INI IS SELECT * FROM TRABAJADOR_INI;BEGINFOR REC IN CUR_TRABAJADOR_INI LOOPINSERT INTO RESPALDO VALUES(REC.ID, REC.NOMBRE, REC.SUELDO_BASE);END LOOP;END;/CREATE OR REPLACE TRIGGER DISP_TRABAJADOR_INI BEFORE INSERT ON TRABAJADOR_INI FOR EACH ROWDECLAREVALOR INTEGER;BEGINCONTAR(VALOR);IF  VALOR = 3 THENCOPIAR();DELETE FROM TRABAJADOR_INI;END IF;END;/INSERT INTO TRABAJADOR_INI VALUES(4,'mau', 1000);INSERT INTO TRABAJADOR_INI VALUES(5,'armando', 20000);INSERT INTO TRABAJADOR_INI VALUES(6,'magda', 3000);INSERT INTO TRABAJADOR_INI VALUES(7,'roko', 4000);SELECT * FROM TRABAJADOR_INI;SELECT * FROM RESPALDO;
